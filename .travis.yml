language: node_js
node_js:
- '12.13'
before_script:
- npm run lint
- npm run build
script:
- npm test -- --coverage
- npm run coveralls
after_success:
- npm pack
deploy:
- provider: releases
  api_key:
    secure: VOVUNgIEzbVVXxWrsAuy7pXxhWzUAGy1wYYBwmpMetdK6WB8cD9WrWi8P575MDSY5KrjRM2LRZlemsLSwGGtyLxG3NAYuG52Qf3eG2mnzfKliYSmQSQBNEXTg5FsLXz7e2Eob6aZm5X1ZdPE5urJVhj4JharKXRADOqu/SjYN1rrAV3MSdYOCXp4SujtYCUPyGqOePfqPfTzE2IfhQ+5nMGHYYCdHoT4QtqsWewp04le8NZGq+3gygxFddDH7hDhDAoEsGiAlxggmWvK/0ulcskl8UQGFuFnYlAzIorPhoD88tKfjvtYqMPXW338zDdaloNc6+LeMIKZS9ahyCXv6JxQkKo/IPgi75H9GOWemq2KMub1HPplrO0BDBHONe6QT52S7yc9knf1JHGcWeMRHxXfRmmXCwq/Uqg2pIvzU5TR4BMeT3C6mLsZXEeIBYGp2qWA2cSz0aPiv1vRe8bdBBEcR/+/LhFbpGV0HHyyXPePn+wrC3LOJDssWi0Ei2wh41N4Lh1ANuwShaGQJIXCVIgaGZ6ur3zw7FRauCTjpuZfXGn6vAmMDx46g4keI+ypB/xg28tU7seMmqXpD7ym2fGSAl5uGS5QrvuLPGjKfiEKeUj8o5QlHYNdcedrWm2tBUoHvdVYLqvdnWlem+a99VG3Y9rN+rP5GTGbtxgU7pk=
  file: reddit-notifier-*.tgz
  on:
    branch: master
    tags: true
  skip_cleanup: 'true'  
- provider: npm
  email: kbirger@gmail.com
  api_key:
    secure: K/dw815w2iTIebMc8cqrszN1VBtbjDWigtWjemi7zh+nqNtV/uDnPRMKKYOBj/PYinK6GBxifJTWy6GBjZ/C0A7nxYPVmKUFjPpvkdEJCjEYVjcFlNAytKGUiAo3tgVaGHFYTb3Z3p2TzLeZjmS7Y+3Rhe1Vyoz52BZ4+YHsQ6jdrsdKzHM2Tl1y3uUQPmCRHxQ92zRsRMVg/4AfwDABqgDIXqk7XJRvmxhWmJ6tap1P1s6H/mvIwb7GYZcGUfOVXiInPF6N8dpB4EutJDa2n4MFQwChel4/3Z0E6T4XztHAfe7nM/dNRULfve/EwWZ8XSD5nLw3IVkwZJbkI1D3ZhGRhBYJvXa57y3EmtSsj7+t5U4w9kmDneUR0RKkFRPcVPRmKPYl1xuCnOzLejHDTXBsCPi8pAzyK2lfIGI8ZL3ICR7onJcG5aHgwRO001XeF1JPzaUOKS/00HSW67ys8rWARe6s4qYj7ZDA3BefvUTMrisP0S0yBds8ZdDcWBakQ/6Toj9mq+9EUfmZEH/lZdeiMRPF0SmDOq1dbYorcfuPltHxhxy4akkz57J/iTVmP0seQ7SlhoQhArMUq27A5Jhh9gRTGVGC04HFxD3hx/KQWj2N0WW+u8Hsb/s4fP8RH7NfkIoh8kPXSLGyPLYtZ0zoqbkFIl7yK+PaTyOR5aQ=

  on:
    branch: master
    tags: true
  skip_cleanup: true